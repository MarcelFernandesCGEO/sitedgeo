"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2739],{3905:(e,a,o)=>{o.d(a,{Zo:()=>p,kt:()=>c});var t=o(7294);function n(e,a,o){return a in e?Object.defineProperty(e,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[a]=o,e}function r(e,a){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),o.push.apply(o,t)}return o}function i(e){for(var a=1;a<arguments.length;a++){var o=null!=arguments[a]?arguments[a]:{};a%2?r(Object(o),!0).forEach((function(a){n(e,a,o[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(o,a))}))}return e}function l(e,a){if(null==e)return{};var o,t,n=function(e,a){if(null==e)return{};var o,t,n={},r=Object.keys(e);for(t=0;t<r.length;t++)o=r[t],a.indexOf(o)>=0||(n[o]=e[o]);return n}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)o=r[t],a.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var s=t.createContext({}),d=function(e){var a=t.useContext(s),o=a;return e&&(o="function"==typeof e?e(a):i(i({},a),e)),o},p=function(e){var a=d(e.components);return t.createElement(s.Provider,{value:a},e.children)},m={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},u=t.forwardRef((function(e,a){var o=e.components,n=e.mdxType,r=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=d(o),c=n,k=u["".concat(s,".").concat(c)]||u[c]||m[c]||r;return o?t.createElement(k,i(i({ref:a},p),{},{components:o})):t.createElement(k,i({ref:a},p))}));function c(e,a){var o=arguments,n=a&&a.mdxType;if("string"==typeof e||n){var r=o.length,i=new Array(r);i[0]=u;var l={};for(var s in a)hasOwnProperty.call(a,s)&&(l[s]=a[s]);l.originalType=e,l.mdxType="string"==typeof e?e:n,i[1]=l;for(var d=2;d<r;d++)i[d]=o[d];return t.createElement.apply(null,i)}return t.createElement.apply(null,o)}u.displayName="MDXCreateElement"},5008:(e,a,o)=>{o.r(a),o.d(a,{assets:()=>s,contentTitle:()=>i,default:()=>m,frontMatter:()=>r,metadata:()=>l,toc:()=>d});var t=o(7462),n=(o(7294),o(3905));const r={title:"masterfile",sidebar_position:1},i=void 0,l={unversionedId:"EDGV_30_pro/masterfile",id:"EDGV_30_pro/masterfile",title:"masterfile",description:"Introdu\xe7\xe3o",source:"@site/docs/EDGV_30_pro/masterfile.md",sourceDirName:"EDGV_30_pro",slug:"/EDGV_30_pro/masterfile",permalink:"/sitedgeo/docs/EDGV_30_pro/masterfile",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/EDGV_30_pro/masterfile.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"masterfile",sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"EDGV 3.0 Pro",permalink:"/sitedgeo/docs/category/edgv-30-pro"},next:{title:"JSON Schema",permalink:"/sitedgeo/docs/EDGV_30_pro/json_schema"}},s={},d=[{value:"Introdu\xe7\xe3o",id:"introdu\xe7\xe3o",level:2},{value:"Defini\xe7\xe3o do Masterfile",id:"defini\xe7\xe3o-do-masterfile",level:2},{value:"Informa\xe7\xf5es Gerais",id:"informa\xe7\xf5es-gerais",level:3},{value:"Dom\xednios",id:"dom\xednios",level:3},{value:"Classes",id:"classes",level:3},{value:"Classes auxiliares",id:"classes-auxiliares",level:3},{value:"Modelagens",id:"modelagens",level:2},{value:"Rotinas",id:"rotinas",level:2},{value:"JSON Schema",id:"json-schema",level:2}],p={toc:d};function m(e){let{components:a,...o}=e;return(0,n.kt)("wrapper",(0,t.Z)({},p,o,{components:a,mdxType:"MDXLayout"}),(0,n.kt)("h2",{id:"introdu\xe7\xe3o"},"Introdu\xe7\xe3o"),(0,n.kt)("p",null,"O Masterfile \xe9 um padr\xe3o em JSON para descrever a modelagem de um banco de dados espaciais. Para cada especifica\xe7\xe3o \xe9 definido um arquivo masterfile, que pode ser convertido de forma autom\xe1tica para a linguagem de interesse, por exemplo SQL para cria\xe7\xe3o de um banco PostGIS, ou a SQL de cria\xe7\xe3o de um Geopackage."),(0,n.kt)("h2",{id:"defini\xe7\xe3o-do-masterfile"},"Defini\xe7\xe3o do Masterfile"),(0,n.kt)("p",null,"O Masterfile \xe9 dividio em 4 se\xe7\xf5es:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Informa\xe7\xf5es gerais: informa\xe7\xf5es sobre o modelo, nome de schemas, sufixo ou prefixo de geometrias, etc."),(0,n.kt)("li",{parentName:"ul"},"Dom\xednios: defini\xe7\xe3o dos c\xf3digos e valores dos dom\xednios."),(0,n.kt)("li",{parentName:"ul"},"Classes: defini\xe7\xe3o das classes com suas geometrias e atributos."),(0,n.kt)("li",{parentName:"ul"},"Classes auxiliares: defini\xe7\xe3o das classes auxiliares que n\xe3o fazem parte da especifica\xe7\xe3o.")),(0,n.kt)("h3",{id:"informa\xe7\xf5es-gerais"},"Informa\xe7\xf5es Gerais"),(0,n.kt)("p",null,"As informa\xe7\xf5es gerais s\xe3o os atributos b\xe1sicos que descrevem a modelagem. S\xe3o eles:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"modelo"),": Nome do modelo descrito pelo masterfile."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"versao"),": Vers\xe3o do modelo."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"schema_dados"),": Para exporta\xe7\xe3o para um banco de dados \xe9 o schema onde estar\xe3o as classes."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"schema_dominios"),": Para exporta\xe7\xe3o para um banco de dados \xe9 o schema onde estar\xe3o as dom\xednios."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"coord_sys"),": EPSG do sistema de coordenadas dos dados."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"fill_factor"),": Para exporta\xe7\xe3o para um banco de dados PostGIS \xe9 o Fill Factor padr\xe3o das tabelas."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"nome_geom"),": Nome da coluna geom\xe9trica nas classes."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"nome_id"),": Nome da coluna de id nas classes.")),(0,n.kt)("p",null,"Abaixo um exemplo de preenchimento desses atributos:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},'"modelo": "EDGV 3.0 Pro",\n"versao": "1.00",\n"schema_dados": "edgv",\n"schema_dominios": "dominios",\n"coord_sys": 31982,\n"fill_factor": 80,\n"nome_geom": "geom",\n"nome_id": "id",\n')),(0,n.kt)("p",null,"Para defini\xe7\xe3o dos nomes das classes baseado no tipo geom\xe9trico se utilizam sufixos ou prefixos."),(0,n.kt)("p",null,"Exemplo de caso de sufixo, por exemplo utilizado na EDGV:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},'"geom_suffix": {\n  "MultiPoint": "_p",\n  "MultiLinestring": "_l",\n  "MultiPolygon": "_a"\n},\n')),(0,n.kt)("p",null,"Exemplo de caso de prefixo, por exemplo utilizado na TRD 4.4 (MGCP):"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},'"geom_prefix": {\n  "MultiPoint": "p", \n  "MultiLinestring": "l", \n  "MultiPolygon": "a"\n}\n')),(0,n.kt)("p",null,'Tamb\xe9m se pode definir o valor de "A SER PREENCHIDO", valor padr\xe3o de dom\xednio para um atributo que n\xe3o foi preenchido at\xe9 o momento pelo operador. A utilidade de tal valor \xe9 n\xe3o utilizar "Desconhecido" para valores ainda n\xe3o preenchidos.'),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},'"a_ser_preenchido": {\n  "code": 9999,\n  "value": "A SER PREENCHIDO"\n}\n')),(0,n.kt)("p",null,"Finalmente, se pode definir o atributos padr\xe3o, que ser\xe3o aplicados em todas as classes. A descri\xe7\xe3o do atributo segue o mesmo padr\xe3o que ser\xe1 explicado posteriormente na se\xe7\xe3o sobre Classes."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},' "atributos_padrao": [\n  {\n    "nome": "observacao",\n    "tipo": "varchar(255)",\n    "cardinalidade": "0..1"\n  }\n]\n')),(0,n.kt)("h3",{id:"dom\xednios"},"Dom\xednios"),(0,n.kt)("p",null,"Dom\xednios armazenam pares c\xf3digos e valores de forma a descrever a listar os valores poss\xedveis de serem utilizados em um atributo de uma classe. N\xe3o \xe9 necess\xe1rio especificar o valor ",(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("em",{parentName:"strong"},"'a ser preenchido'")),"."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},'{\n  "nome": "tipo_curva_nivel",\n  "valores": [\n    {\n      "code": 1,\n      "value": "Mestra"\n    },\n    {\n      "code": 2,\n      "value": "Normal"\n    },\n    {\n      "code": 3,\n      "value": "Auxiliar"\n    }\n  ]\n}\n')),(0,n.kt)("p",null,"Os dom\xednios tamb\xe9m pode ser organizados por grupos, que s\xe3o utilizados como filtro na implementa\xe7\xe3o dos formul\xe1rios no QGIS."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},' {\n  "nome": "tipo_veg",\n  "valores": [\n    {\n      "code": 150,\n      "value": "Cult - Arroz de inunda\xe7\xe3o",\n      "valor_filtro": "Vegeta\xe7\xe3o Cultivada"\n    },\n    {\n      "code": 194,\n      "value": "Cult - Perene",\n      "valor_filtro": "Vegeta\xe7\xe3o Cultivada"\n    },\n    {\n      "code": 196,\n      "value": "Cult - Anual",\n      "valor_filtro": "Vegeta\xe7\xe3o Cultivada"\n    },\n      {\n      "code": 201,\n      "value": "Mangue",\n      "descricao": "-",\n      "valor_filtro": "Mangue"\n    },\n  ],\n  "filtro": true\n},\n')),(0,n.kt)("h3",{id:"classes"},"Classes"),(0,n.kt)("p",null,"A defini\xe7\xe3o de classes utiliza quatro propriedades b\xe1sicas:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"nome"),": Nome da classe sendo descrita."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"categoria"),": Categoria para fins de agrupamento de classes similares. O nome da classe no formato de destino ser\xe1 a concatena\xe7\xe3o entre a categoria, o nome, e o tipo geom\xe9trico (baseado no prefixo e sufixo das informa\xe7\xf5es gerais). Por exemplo: aquisicao_limite_massa_dagua_l."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"primitivas"),": Lista de primitivas geom\xe9tricas que aquela classe pode assumir. Os seguintes valores s\xe3o v\xe1lidos: ",(0,n.kt)("inlineCode",{parentName:"li"},"MultiPoint"),", ",(0,n.kt)("inlineCode",{parentName:"li"},"MultiLinestring"),", ",(0,n.kt)("inlineCode",{parentName:"li"},"MultiPolygon"),"."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"atributos"),": Lista de atributos da classe.")),(0,n.kt)("p",null,"Exemplo:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},'{\n  "nome": "limite_massa_dagua",\n  "categoria": "aquisicao",\n  "primitivas": ["MultiLinestring"],\n  "atributos": []\n},\n')),(0,n.kt)("p",null,"As propriedades ",(0,n.kt)("inlineCode",{parentName:"p"},"geom_suffix")," e ",(0,n.kt)("inlineCode",{parentName:"p"},"geom_prefix")," podem ser definidas para a classe, e esta ir\xe1 sobrepor a defini\xe7\xe3o geral."),(0,n.kt)("p",null,"Na lista de atributos cada atributo deve ser descrito individualmente. Existem 3 propriedades b\xe1sicas:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"nome"),": Nome do atributo."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"tipo"),": tipo do atributo, sendo valores v\xe1lidos ",(0,n.kt)("inlineCode",{parentName:"li"},"varchar"),", ",(0,n.kt)("inlineCode",{parentName:"li"},"smallint"),",  ",(0,n.kt)("inlineCode",{parentName:"li"},"real"),", ",(0,n.kt)("inlineCode",{parentName:"li"},"boolean")," e ",(0,n.kt)("inlineCode",{parentName:"li"},"integer"),". Para ",(0,n.kt)("em",{parentName:"li"},"varchar")," deve ser descrito seu tamanho, por exemplo ",(0,n.kt)("inlineCode",{parentName:"li"},"varchar(80)"),"."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"cardinalidade"),": Cardinalidade do atributo, sendo valores v\xe1lidos: ",(0,n.kt)("inlineCode",{parentName:"li"},"0..1"),", ",(0,n.kt)("inlineCode",{parentName:"li"},"1..1"),", ",(0,n.kt)("inlineCode",{parentName:"li"},"0..*")," e ",(0,n.kt)("inlineCode",{parentName:"li"},"1..*"))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},'{\n  "nome": "nome",\n  "tipo": "varchar(255)",\n  "cardinalidade": "0..1"\n},\n')),(0,n.kt)("p",null,"Para associar um atributo com um dom\xednio se deve utilizar a propriedade ",(0,n.kt)("inlineCode",{parentName:"p"},"mapa_valor")," que recebe como valor o nome do dom\xednio desejado."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},'{\n  "nome": "tipo",\n  "tipo": "smallint",\n  "cardinalidade": "1..1",\n  "mapa_valor": "tipo_veg"\n},\n')),(0,n.kt)("p",null,"Pode se restringir valores do mapa de valor utilizando a propriedade ",(0,n.kt)("inlineCode",{parentName:"p"},"valores"),", e listando os valores desejados."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},'{\n  "nome": "material_construcao",\n  "tipo": "smallint",\n  "cardinalidade": "1..1",\n  "mapa_valor": "material_construcao",\n  "valores": [\n    {\n      "code": 0\n    },\n    {\n      "code": 1\n    },\n    {\n      "code": 2\n    },\n    {\n      "code": 4\n    },\n    {\n      "code": 23\n    }\n  ]\n}\n')),(0,n.kt)("p",null,"Tamb\xe9m a seguinte simplifica\xe7\xe3o \xe9 aceit\xe1vel."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},'{\n  "nome": "material_construcao",\n  "tipo": "smallint",\n  "cardinalidade": "1..1",\n  "mapa_valor": "material_construcao",\n  "valores": [ 0, 1, 2, 4, 23 ]\n}\n')),(0,n.kt)("p",null,"Pode se restringir certos valores a primitivas geom\xe9tricas adicionando a propriedade ",(0,n.kt)("inlineCode",{parentName:"p"},"primitivas"),", e listando as primitivas desejadas. Se um c\xf3digo n\xe3o possui essa propriedade implica que ele \xe9 v\xe1lido para todas as primitivas."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},'{\n  "nome": "tipo",\n  "tipo": "smallint",\n  "cardinalidade": "1..1",\n  "mapa_valor": "tipo_elemento_infraestrutura",\n  "valores": [\n    {\n      "code": 701,\n      "primitivas": ["MultiPolygon", "MultiLinestring"]\n    },\n    {\n      "code": 801,\n      "primitivas": ["MultiPolygon", "MultiLinestring"]\n    },\n    {\n      "code": 901,\n      "primitivas": ["MultiLinestring", "MultiPoint"]\n    },\n    {\n      "code": 1001\n    }\n  ]\n}\n')),(0,n.kt)("p",null,"Outro modo de organizar as primitivas geom\xe9trica \xe9 da seguinte forma:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},'{\n  "nome": "tipo",\n  "tipo": "smallint",\n  "cardinalidade": "1..1",\n  "mapa_valor": "tipo_elemento_infraestrutura",\n  "valores": {\n    "MultiPoint": [ 901, 1001 ],\n    "MultiLinestring": [ 701, 801, 1001 ],\n    "MultiPolygon": [ 701, 801, 901, 1001 ]\n  }\n}\n')),(0,n.kt)("p",null,"Certos atributos podem ser limitados a uma primitiva geom\xe9trica da seguinte forma:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},'{\n  "nome": "simb_rot",\n  "tipo": "real",\n  "cardinalidade": "0..1",\n  "primitivas": [ "MultiPoint" ]\n}\n')),(0,n.kt)("h3",{id:"classes-auxiliares"},"Classes auxiliares"),(0,n.kt)("p",null,"Classes auxiliares segue o mesmo padr\xe3o de classes, s\xf3 estando separado para fins de organiza\xe7\xe3o."),(0,n.kt)("h2",{id:"modelagens"},"Modelagens"),(0,n.kt)("p",null,"As seguintes modelagens possuem Masterfile:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"EDGV 2.1.3"),(0,n.kt)("li",{parentName:"ul"},"EDGV 2.1.3 Shapefile"),(0,n.kt)("li",{parentName:"ul"},"EDGV 2.1.3 Pro"),(0,n.kt)("li",{parentName:"ul"},"EDGV 3.0"),(0,n.kt)("li",{parentName:"ul"},"EDGV 3.0 Shapefile"),(0,n.kt)("li",{parentName:"ul"},"EDGV 3.0 Pro"),(0,n.kt)("li",{parentName:"ul"},"EDGV 3.0 Pro Orto"),(0,n.kt)("li",{parentName:"ul"},"TRD 4.4"),(0,n.kt)("li",{parentName:"ul"},"TRD 4.4 Shapefile")),(0,n.kt)("p",null,"Existem masterfiles distintos para implementa\xe7\xe3o em Shapefile pois tal implementa\xe7\xe3o requer um padr\xe3o distinto de nome de classes e de atributos. Seria interessante no futuro estender a defini\xe7\xe3o do Masterfile para comportar ambos os casos de forma \xfanica. "),(0,n.kt)("p",null,"Todos os Masterfiles est\xe3o dispon\xedveis no ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/dsgoficial/modelagens"},"reposit\xf3rio de modelagens da DSG"),"."),(0,n.kt)("h2",{id:"rotinas"},"Rotinas"),(0,n.kt)("p",null,"As seguintes rotinas est\xe3o implementadas:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Cria SQL a partir do Masterfile"),(0,n.kt)("li",{parentName:"ul"},"Cria Gpkg a partir do Masterfile"),(0,n.kt)("li",{parentName:"ul"},"Cria Shapefile a partir do Masterfile")),(0,n.kt)("h2",{id:"json-schema"},"JSON Schema"),(0,n.kt)("p",null,"Para validar o Masterfile \xe9 necess\xe1rio utilizar o ",(0,n.kt)("a",{parentName:"p",href:"/sitedgeo/docs/EDGV_30_pro/json_schema"},"JSON Schema")," que tamb\xe9m est\xe1 dispon\xedvel no ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/dsgoficial/modelagens"},"reposit\xf3rio de modelagens da DSG"),"."))}m.isMDXComponent=!0}}]);